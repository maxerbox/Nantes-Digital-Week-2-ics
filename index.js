const ics = require('ics')
const cheerio = require('cheerio')
const {
    writeFileSync
} = require('fs')
var coll = []
global.L = {}
L.marker = (coords, icon) => {
    return {
        bindPopup: (html) => {
            coll.push({
                coords,
                html
            })
        }
    }
}
var text = `var myIcon= ''
var marker = L.marker([47.206414, -1.5605269999999791], { icon: myIcon }).bindPopup("<div><p class='date'>Les 12 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/tout-ce-que-vous-avez-toujours-voulu-savoir-sur-lexperimentation-urbaine/' title='Tout ce que vous avez toujours voulu savoir sur l&#8217;expérimentation urbaine&#8230;'>Tout ce que vous avez toujours voulu savoir sur l&#8217;expérimentation urbaine&#8230;</a></p></div>")
var marker = L.marker([47.2146263, -1.5450531000000183], { icon: myIcon }).bindPopup("<div><p class='date'>Les 19 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/mon-maire-ce-robot/' title='Mon maire, ce robot ?'>Mon maire, ce robot ?</a></p></div>")
var marker = L.marker([47.21999, -1.556130899999971], { icon: myIcon }).bindPopup("<div><p class='date'>Le 19 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/enedis-data-day/' title='Enedis Data Day'>Enedis Data Day</a></p></div>")
var marker = L.marker([47.21301700000001, -1.5651054999999587], { icon: myIcon }).bindPopup("<div><p class='date'>Les 18 et 21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/entomologik/' title='EntomologiK'>EntomologiK</a></p></div>")
var marker = L.marker([47.20533529999999, -1.5636394000000564], { icon: myIcon }).bindPopup("<div><p class='date'>21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/totem-evenement/' title='TOTEM'>TOTEM</a></p></div>")
var marker = L.marker([47.211327, -1.5621505999999954], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/geek-art-conference-pop-culture/' title='Geek Art, conférence pop culture'>Geek Art, conférence pop culture</a></p></div>")
var marker = L.marker([47.20138, -1.5597482000000582], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/coding-minecraft-geant/' title='Coding géant'>Coding géant</a></p></div>")
var marker = L.marker([47.2336372, -1.5441088000000036], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/securite-entreprises-face-aux-nouveaux-usages-numeriques/' title='Comment protéger efficacement les données de votre entreprise ? Venez vivre une cyber-attaque en temps réel !'>Comment protéger efficacement les données de votre entreprise ? Venez vivre une cyber-attaque en temps réel !</a></p></div>")
var marker = L.marker([47.2058498, -1.56128549999994], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/le-digital-au-service-du-patient/' title='Le digital au service du patient'>Le digital au service du patient</a></p></div>")
var marker = L.marker([47.218371, -1.553621000000021], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/portes-ouvertes-des-lieux-de-mediation-numerique/' title='Portes ouvertes des lieux qui vous accompagnent sur les pratiques du numérique'>Portes ouvertes des lieux qui vous accompagnent sur les pratiques du numérique</a></p></div>")
var marker = L.marker([47.2047287, -1.5622386999999662], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/programmation-robot/' title='Un robot au service de votre performance : participez à sa programmation lors d’une expérience unique !'>Un robot au service de votre performance : participez à sa programmation lors d’une expérience unique !</a></p></div>")
var marker = L.marker([47.2070506, -1.5604375000000346], { icon: myIcon }).bindPopup("<div><p class='date'>21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/forum-jeunes-numeriques/' title='Forum Jeunes Numériques'>Forum Jeunes Numériques</a></p></div>")
var marker = L.marker([47.2119474, -1.6149218000000474], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/numerique-et-creation-artistique/' title='Numérique et création artistique : une rencontre pas si virtuelle'>Numérique et création artistique : une rencontre pas si virtuelle</a></p></div>")
var marker = L.marker([47.1922791, -1.577678600000013], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/vivre-heureux-avec-le-numerique/' title='Vivre heureux.se avec le numérique'>Vivre heureux.se avec le numérique</a></p></div>")
var marker = L.marker([47.2258511, -1.6178446000000122], { icon: myIcon }).bindPopup("<div><p class='date'>14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/atelier-construction-programmation-des-robots-algora-2/' title='Atelier 1 enfant/1 senior : construction et programmation des robots Algora'>Atelier 1 enfant/1 senior : construction et programmation des robots Algora</a></p></div>")
var marker = L.marker([47.20863250000001, -1.539320900000007], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/transition-numerique-et-logiciel-definir-une-strategie-gagnante/' title='Patrimoine numérique : le RGPD en pratique ? Comment le brevet protège vos logiciels ?'>Patrimoine numérique : le RGPD en pratique ? Comment le brevet protège vos logiciels ?</a></p></div>")
var marker = L.marker([47.2063581, -1.5406011999999691], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/handicamp-agir-ensemble/' title='HandiCamp : agir Ensemble !'>HandiCamp : agir Ensemble !</a></p></div>")
var marker = L.marker([47.2133021, -1.5582154999999602], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/concours-fundtruck/' title='Concours Fundtruck'>Concours Fundtruck</a></p></div>")
var marker = L.marker([47.212407, -1.5696014000000105], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/trophees-pme-2019/' title='Trophées PME 2019 : réussir avec le numérique'>Trophées PME 2019 : réussir avec le numérique</a></p></div>")
var marker = L.marker([47.2073839, -1.6106867999999395], { icon: myIcon }).bindPopup("<div><p class='date'>16 et 17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/digital-week-sport/' title='Digital Week Sport'>Digital Week Sport</a></p></div>")
var marker = L.marker([47.2335005, -1.6272802999999385], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/rse-qvt-transformez-votre-entreprise/' title='RSE, QVT, Bien-être&#8230;Transformez votre entreprise de l&#8217;intérieur !'>RSE, QVT, Bien-être&#8230;Transformez votre entreprise de l&#8217;intérieur !</a></p></div>")
var marker = L.marker([47.2139633, -1.543794700000035], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/safari-des-metiers-du-numerique-2019/' title='Safari des Métiers du Numérique 2019'>Safari des Métiers du Numérique 2019</a></p></div>")
var marker = L.marker([47.2038885, -1.5690008000000262], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/welcome-on-board/' title='Welcome on board'>Welcome on board</a></p></div>")
var marker = L.marker([47.2109598, -1.5494962000000214], { icon: myIcon }).bindPopup("<div><p class='date'>13 et 14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/willa-possible-1kubator/' title='WILLA Possible @1Kubator'>WILLA Possible @1Kubator</a></p></div>")
var marker = L.marker([47.2066897, -1.5467187000000422], { icon: myIcon }).bindPopup("<div><p class='date'>21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/laboratoire-des-usages-numeriques-de-loire-atlantique/' title='Explorez le Laboratoire des Usages Numériques de Loire-Atlantique'>Explorez le Laboratoire des Usages Numériques de Loire-Atlantique</a></p></div>")
var marker = L.marker([47.2445647, -1.6355204000000185], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/intelligence-artificielle-au-service-de-la-prise-en-charge-du-patient/' title='L&#8217;Intelligence artificielle au service de la prise en charge du/de la patient·e'>L&#8217;Intelligence artificielle au service de la prise en charge du/de la patient·e</a></p></div>")
var marker = L.marker([47.211327, -1.5621505999999954], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/a-quoi-ca-sert-de-coder/' title='A quoi ça sert de coder ?'>A quoi ça sert de coder ?</a></p></div>")
var marker = L.marker([47.1985803, -1.5530860999999732], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/digital-dating-4-scopitone-spirits/' title='ANNULÉ &#8211; Digital Dating #4 // Scopitone Spirits'>ANNULÉ &#8211; Digital Dating #4 // Scopitone Spirits</a></p></div>")
var marker = L.marker([47.2109598, -1.5494962000000214], { icon: myIcon }).bindPopup("<div><p class='date'>30 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/design-thinking-education-ia/' title='DÉCALÉ AU 30 SEPT 2019 : Découverte du Design Thinking : Comment changer l&#8217;éducation à l&#8217;aube de l&#8217;intelligence artificielle ?'>DÉCALÉ AU 30 SEPT 2019 : Découverte du Design Thinking : Comment changer l&#8217;éducation à l&#8217;aube de l&#8217;intelligence artificielle ?</a></p></div>")
var marker = L.marker([47.2452036, -1.5934310999999752], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/tourisme-digital-day/' title='Tourisme Digital Day'>Tourisme Digital Day</a></p></div>")
var marker = L.marker([47.2046416, -1.5589442000000417], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/numerique-et-travail/' title='Numérique et travail : focus sur le syndicalisme, le télétravail et la place des femmes à l&#8217;heure du numérique'>Numérique et travail : focus sur le syndicalisme, le télétravail et la place des femmes à l&#8217;heure du numérique</a></p></div>")
var marker = L.marker([47.2422725, -1.528930100000025], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/differents-et-connectes/' title='Différent.e.s. et connecté.e.s !'>Différent.e.s. et connecté.e.s !</a></p></div>")
var marker = L.marker([47.2106864, -1.5503171000000293], { icon: myIcon }).bindPopup("<div><p class='date'>20 et 21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/railsgirls-1-journee-pour-apprendre-a-coder/' title='RailsGirls : 1 journée pour apprendre à coder'>RailsGirls : 1 journée pour apprendre à coder</a></p></div>")
var marker = L.marker([47.2329398, -1.6283578000000034], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/matinale-iot-les-etapes-cles-pour-reussir-son-projet/' title='Matinale IoT &#8211; Les étapes clés pour réussir son projet'>Matinale IoT &#8211; Les étapes clés pour réussir son projet</a></p></div>")
var marker = L.marker([47.2122736, -1.5446014999999989], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/osons-le-futur/' title='Osons le futur !'>Osons le futur !</a></p></div>")
var marker = L.marker([47.24082629999999, -1.5127846999999974], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/libere-ton-savoir/' title='Libère ton savoir'>Libère ton savoir</a></p></div>")
var marker = L.marker([47.2058498, -1.56128549999994], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/securite-des-objets-connectes/' title='Matinale IoT &#8211; La sécurité des objets connectés'>Matinale IoT &#8211; La sécurité des objets connectés</a></p></div>")
var marker = L.marker([47.2045189, -1.5608392999999978], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/datarama-4/' title='Datarama #4 : dataviz une esthétique du réel ?'>Datarama #4 : dataviz une esthétique du réel ?</a></p></div>")
var marker = L.marker([47.20863250000001, -1.539320900000007], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/rh-transformation-numerique/' title='Cap sur les RH : au cœur de la Transformation Numérique'>Cap sur les RH : au cœur de la Transformation Numérique</a></p></div>")
var marker = L.marker([47.2047287, -1.5622386999999662], { icon: myIcon }).bindPopup("<div><p class='date'>Du 19 au 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/neo-makers-artisanat-design-numerique/' title='Néo makers // Artisanat, design &#038; numérique'>Néo makers // Artisanat, design &#038; numérique</a></p></div>")
var marker = L.marker([47.212672, -1.6086482000000615], { icon: myIcon }).bindPopup("<div><p class='date'>14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/carrement-robots/' title='Carrément Robots'>Carrément Robots</a></p></div>")
var marker = L.marker([47.24818529999999, -1.5873576000000185], { icon: myIcon }).bindPopup("<div><p class='date'>22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/animations-numeriques/' title='Animations Numériques'>Animations Numériques</a></p></div>")
var marker = L.marker([47.2070626, -1.558855499999936], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/meet-your-startup/' title='REPORTÉ AU 12/11/19 &#8211; Meet Your Startup &#8211; L’événement de rencontre entre startups et futurs associés.'>REPORTÉ AU 12/11/19 &#8211; Meet Your Startup &#8211; L’événement de rencontre entre startups et futurs associés.</a></p></div>")
var marker = L.marker([47.2047695, -1.568371999999954], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/code-in-the-dark/' title='Code in the Dark'>Code in the Dark</a></p></div>")
var marker = L.marker([47.2447591, -1.6098345000000336], { icon: myIcon }).bindPopup("<div><p class='date'>21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/un-job-pour-toi-dans-le-numerique/' title='Un job pour toi dans le numérique'>Un job pour toi dans le numérique</a></p></div>")
var marker = L.marker([47.21301700000001, -1.5651054999999587], { icon: myIcon }).bindPopup("<div><p class='date'>Les 18 et 21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/entomologik-2/' title='EntomologiK'>EntomologiK</a></p></div>")
var marker = L.marker([47.2067254, -1.5623511999999664], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/e-commerce-et-b2c-cles-de-la-reussite-et-points-de-vigilance/' title='E-commerce et B2C : clés de la réussite et points de vigilance'>E-commerce et B2C : clés de la réussite et points de vigilance</a></p></div>")
var marker = L.marker([47.2067254, -1.5623511999999664], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/cadre-juridique-des-reseaux-sociaux/' title='Cadre juridique des réseaux sociaux : points d&#8217;attention et de vigilance'>Cadre juridique des réseaux sociaux : points d&#8217;attention et de vigilance</a></p></div>")
var marker = L.marker([47.2061299, -1.615337899999986], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/le-nez-sur-ecran/' title='Le nez sur l&#8217;écran'>Le nez sur l&#8217;écran</a></p></div>")
var marker = L.marker([47.20737159999999, -1.555804500000022], { icon: myIcon }).bindPopup("<div><p class='date'>13 et 14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/digital-job-xperience/' title='Digital Job Xpérience'>Digital Job Xpérience</a></p></div>")
var marker = L.marker([47.1657886, -1.55430309999997], { icon: myIcon }).bindPopup("<div><p class='date'>21 et 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/decouverte-des-halles-ile-de-nantes/' title='À la découverte des Halles de l&#8217;île de Nantes'>À la découverte des Halles de l&#8217;île de Nantes</a></p></div>")
var marker = L.marker([47.218371, -1.553621000000021], { icon: myIcon }).bindPopup("<div><p class='date'>12 au 20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/tour-du-numerique-4/' title='Tour du Numérique #4'>Tour du Numérique #4</a></p></div>")
var marker = L.marker([47.250497, -1.5544830999999704], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/motivation-equipes-former-avec-le-digital/' title='Comment j’ai réussi à motiver mes équipes à se former avec le digital ?'>Comment j’ai réussi à motiver mes équipes à se former avec le digital ?</a></p></div>")
var marker = L.marker([47.2618336, -1.5740796999999702], { icon: myIcon }).bindPopup("<div><p class='date'>21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/lachetamanette-irl/' title='#LâcheTaManette, IRL'>#LâcheTaManette, IRL</a></p></div>")
var marker = L.marker([47.21275560000001, -1.5516129000000092], { icon: myIcon }).bindPopup("<div><p class='date'>12 et 13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/etrange-bus-de-nuit/' title='L&#8217;étrange bus de nuit'>L&#8217;étrange bus de nuit</a></p></div>")
var marker = L.marker([47.2177687, -1.5592861000000084], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/mash-up-nantes-18/' title='Mash Up Nantes #18 : quand l&#8217;entrepreneuriat rencontre les étoiles'>Mash Up Nantes #18 : quand l&#8217;entrepreneuriat rencontre les étoiles</a></p></div>")
var marker = L.marker([47.1811681, -1.588761100000056], { icon: myIcon }).bindPopup("<div><p class='date'>14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/entraide-et-solidarites-numeriques/' title='Entraide et solidarités numériques'>Entraide et solidarités numériques</a></p></div>")
var marker = L.marker([47.2172873, -1.5334563999999773], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/cap-sur-le-code/' title='Cap sur le Code !'>Cap sur le Code !</a></p></div>")
var marker = L.marker([47.2128149, -1.554611199999954], { icon: myIcon }).bindPopup("<div><p class='date'>Du 12 au 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/escape-game/' title='Agent·e·s : êtes-vous prêt·e·s pour une nouvelle mission ?'>Agent·e·s : êtes-vous prêt·e·s pour une nouvelle mission ?</a></p></div>")
var marker = L.marker([47.2131428, -1.5427025999999842], { icon: myIcon }).bindPopup("<div><p class='date'>10 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/salon-de-la-data/' title='Salon de la Data'>Salon de la Data</a></p></div>")
var marker = L.marker([47.20071360000001, -1.5730105000000094], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/apero-numerique/' title='Apéro Numérique : Objets connectés et big data, quel avenir pour notre vie privée ?'>Apéro Numérique : Objets connectés et big data, quel avenir pour notre vie privée ?</a></p></div>")
var marker = L.marker([47.2054264, -1.563013299999966], { icon: myIcon }).bindPopup("<div><p class='date'>Du 20 au 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/jules-verne-expedition-interactive-et-immersive/' title='Jules Verne 2.0, l&#8217;expédition interactive et immersive'>Jules Verne 2.0, l&#8217;expédition interactive et immersive</a></p></div>")
var marker = L.marker([47.2046759, -1.5548883999999816], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/experience-client-b2b-transformation-digitale/' title='Comment intégrer l’expérience client B2B au cœur d’une transformation digitale : retour d’expérience Manitou'>Comment intégrer l’expérience client B2B au cœur d’une transformation digitale : retour d’expérience Manitou</a></p></div>")
var marker = L.marker([47.2066244, -1.574648400000001], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/socio-digital-humain-au-coeur-de-votre-transformation-numerique/' title='Socio-digital : l&#8217;Humain au cœur de votre transformation numérique'>Socio-digital : l&#8217;Humain au cœur de votre transformation numérique</a></p></div>")
var marker = L.marker([47.1664617, -1.581222700000012], { icon: myIcon }).bindPopup("<div><p class='date'>16 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/artisans-du-batiment-numerique/' title='Artisans du bâtiment : sortez la tête de l&#8217;eau'>Artisans du bâtiment : sortez la tête de l&#8217;eau</a></p></div>")
var marker = L.marker([47.2046759, -1.5548883999999816], { icon: myIcon }).bindPopup("<div><p class='date'>12 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/enlarge-your-pitch-les-cles-pitch-qui-dechire/' title='Enlarge your pitch : les clés d’un pitch qui déchire !'>Enlarge your pitch : les clés d’un pitch qui déchire !</a></p></div>")
var marker = L.marker([47.20574889999999, -1.5657238999999663], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/apprendre-ere-du-digital/' title='Apprendre à l&#8217;ère du digital'>Apprendre à l&#8217;ère du digital</a></p></div>")
var marker = L.marker([47.157469, -1.5442967999999837], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/numerique-en-communs-nantes/' title='COMPLET : Numérique en commun[s] @ NANTES'>COMPLET : Numérique en commun[s] @ NANTES</a></p></div>")
var marker = L.marker([47.2047695, -1.568371999999954], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/devenez-sherpa-des-donnees-eco-responsables-du-territoire-nantais/' title='Devenez « sherpa » des données éco-responsables du territoire nantais !'>Devenez « sherpa » des données éco-responsables du territoire nantais !</a></p></div>")
var marker = L.marker([47.1654108, -1.5876479999999447], { icon: myIcon }).bindPopup("<div><p class='date'>16 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/impacts-industrie-et-le-monde-numerique/' title='Quels sont les impacts de l&#8217;industrie 4.0 dans les industries et le monde numérique ?'>Quels sont les impacts de l&#8217;industrie 4.0 dans les industries et le monde numérique ?</a></p></div>")
var marker = L.marker([47.2071068, -1.5555922999999439], { icon: myIcon }).bindPopup("<div><p class='date'>16 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/travailler-dans-le-numerique-a-bas-les-cliches/' title='Travailler dans le numérique : à bas les clichés !'>Travailler dans le numérique : à bas les clichés !</a></p></div>")
var marker = L.marker([47.2468303, -1.5530794000000014], { icon: myIcon }).bindPopup("<div><p class='date'>13 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/hacke-malgre-moi/' title='Hacké.e, malgré moi !'>Hacké.e, malgré moi !</a></p></div>")
var marker = L.marker([47.2045189, -1.5608392999999978], { icon: myIcon }).bindPopup("<div><p class='date'>12 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/cyber-guerre-une-nouvelle-guerre-froide/' title='Cyber guerre : une nouvelle guerre froide ?'>Cyber guerre : une nouvelle guerre froide ?</a></p></div>")
var marker = L.marker([47.28430969999999, -1.5412257000000409], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/la-crea-facon-tatin/' title='La créa façon tatin !'>La créa façon tatin !</a></p></div>")
var marker = L.marker([47.2271817, -1.518791800000031], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/mobilisons-le-digital-pour-reussir-a-international/' title='Mobilisons le digital pour réussir à l&#8217;international !'>Mobilisons le digital pour réussir à l&#8217;international !</a></p></div>")
var marker = L.marker([47.2036576, -1.570995499999981], { icon: myIcon }).bindPopup("<div><p class='date'>14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/et-si-ma-maitresse-mon-maitre-etait-un-robot/' title='Et si ma maîtresse / mon maître était un robot ?'>Et si ma maîtresse / mon maître était un robot ?</a></p></div>")
var marker = L.marker([47.1922791, -1.577678600000013], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/mangeoire-numerique-oiseaux/' title='La mangeoire numérique pour les oiseaux'>La mangeoire numérique pour les oiseaux</a></p></div>")
var marker = L.marker([47.1922791, -1.577678600000013], { icon: myIcon }).bindPopup("<div><p class='date'>16 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/habitat-et-donnees-numeriques/' title='Habitat et données numériques'>Habitat et données numériques</a></p></div>")
var marker = L.marker([47.2065814, -1.564369299999953], { icon: myIcon }).bindPopup("<div><p class='date'>17 au 21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/nantes-electronic-art-rencontre-near/' title='Le Nantes Electronic Art Rencontre [NEAR]'>Le Nantes Electronic Art Rencontre [NEAR]</a></p></div>")
var marker = L.marker([47.2166394, -1.5587805999999773], { icon: myIcon }).bindPopup("<div><p class='date'>12 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/atelier-mao/' title='Atelier MAO'>Atelier MAO</a></p></div>")
var marker = L.marker([47.20141799999999, -1.5709130000000187], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/le-digital-au-service-de-la-rse/' title='Le digital au service de la RSE'>Le digital au service de la RSE</a></p></div>")
var marker = L.marker([47.2258511, -1.6178446000000122], { icon: myIcon }).bindPopup("<div><p class='date'>21 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/construction-programmation-des-robots-algora/' title='Atelier pour les ados : construction &#038; programmation des robots Algora'>Atelier pour les ados : construction &#038; programmation des robots Algora</a></p></div>")
var marker = L.marker([47.2060884, -1.5575777000000244], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/culture-patrimoine-numerique-nantes/' title='Culture et patrimoine numérique à Nantes'>Culture et patrimoine numérique à Nantes</a></p></div>")
var marker = L.marker([47.2164079, -1.560987999999952], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/initiation-a-la-programmation-informatique/' title='À vous de coder ! Une initiation à la programmation informatique'>À vous de coder ! Une initiation à la programmation informatique</a></p></div>")
var marker = L.marker([47.2164079, -1.560987999999952], { icon: myIcon }).bindPopup("<div><p class='date'>17 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/application-mobile-marvel-app/' title='Imaginez votre première application mobile dessinez-la avec Marvel App'>Imaginez votre première application mobile dessinez-la avec Marvel App</a></p></div>")
var marker = L.marker([47.2258511, -1.6178446000000122], { icon: myIcon }).bindPopup("<div><p class='date'>14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/atelier-construction-programmation-des-robots-algora/' title='Atelier 1 enfant/1 senior : construction &#038; programmation des robots Algora'>Atelier 1 enfant/1 senior : construction &#038; programmation des robots Algora</a></p></div>")
var marker = L.marker([47.20416519999999, -1.5463376000000153], { icon: myIcon }).bindPopup("<div><p class='date'>18 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/le-numerique-une-chance-pour-les-habitants-des-quartiers-prioritaires/' title='Le numérique : une chance pour les habitant·e·s des quartiers prioritaires / populaires ?'>Le numérique : une chance pour les habitant·e·s des quartiers prioritaires / populaires ?</a></p></div>")
var marker = L.marker([47.20138, -1.5597482000000582], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/forum-tech-for-good/' title='Forum Tech for Good'>Forum Tech for Good</a></p></div>")
var marker = L.marker([47.21914719999999, -1.5570761000000175], { icon: myIcon }).bindPopup("<div><p class='date'>18 et 19 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/ia-rv-ra-blockchain-appliquees-a-energie/' title='IA/RV/RA/Blockchain appliquées à l&#8217;énergie'>IA/RV/RA/Blockchain appliquées à l&#8217;énergie</a></p></div>")
var marker = L.marker([47.2144486, -1.562566400000037], { icon: myIcon }).bindPopup("<div><p class='date'>16 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/cybersecurite-entreprises-locales/' title='Voyage initiatique au cœur de la cybersécurité de nos entreprises locales'>Voyage initiatique au cœur de la cybersécurité de nos entreprises locales</a></p></div>")
var marker = L.marker([47.2131428, -1.5427025999999842], { icon: myIcon }).bindPopup("<div><p class='date'>Du 24 au 27 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/iasp-2019-nantes/' title='IASP 2019  Nantes'>IASP 2019  Nantes</a></p></div>")
var marker = L.marker([47.1481561, -1.6410152999999355], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/la-cybersecurite-positive-et-humaine/' title='La Cybersécurité Positive et Humaine'>La Cybersécurité Positive et Humaine</a></p></div>")
var marker = L.marker([47.1942194, -1.6271683999999595], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/les-cafes-de-la-creation-by-ca/' title='ANNULÉ &#8211; Les Cafés de la Création by CA'>ANNULÉ &#8211; Les Cafés de la Création by CA</a></p></div>")
var marker = L.marker([47.20224069999999, -1.5775859999999966], { icon: myIcon }).bindPopup("<div><p class='date'>21 et 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/immersion-espace/' title='Immersion dans l&#8217;Espace'>Immersion dans l&#8217;Espace</a></p></div>")
var marker = L.marker([47.206572, -1.5638779999999315], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/smart-building-performance-et-valorisation-du-patrimoine/' title='Smart building : performance et valorisation du patrimoine !'>Smart building : performance et valorisation du patrimoine !</a></p></div>")
var marker = L.marker([47.2390914, -1.519919200000004], { icon: myIcon }).bindPopup("<div><p class='date'>14 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/seconde-vie-pour-votre-pc/' title='Une seconde vie pour votre PC : Linux, une alternative à Windows'>Une seconde vie pour votre PC : Linux, une alternative à Windows</a></p></div>")
var marker = L.marker([47.20416699999999, -1.5472220000000334], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/hopital-numerique/' title='L&#8217;Hôpital Numérique'>L&#8217;Hôpital Numérique</a></p></div>")
var marker = L.marker([47.20138, -1.5597482000000582], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/ia-une-mine-or/' title='L&#8217;IA, une mine d&#8217;or ?'>L&#8217;IA, une mine d&#8217;or ?</a></p></div>")
var marker = L.marker([47.2326936, -1.6301181999999699], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/megagilosaurus-rex/' title='Megagilosaurus Rex'>Megagilosaurus Rex</a></p></div>")
var marker = L.marker([47.20416699999999, -1.5472220000000334], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/retours-experiences-hopital-numerique-du-futur/' title='Retours d&#8217;expériences de l&#8217;hôpital numérique du futur'>Retours d&#8217;expériences de l&#8217;hôpital numérique du futur</a></p></div>")
var marker = L.marker([47.2038885, -1.5690008000000262], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/banque-digitale-de-demain/' title='Inventez la banque digitale de demain !'>Inventez la banque digitale de demain !</a></p></div>")
var marker = L.marker([47.2074631, -1.5658587000000352], { icon: myIcon }).bindPopup("<div><p class='date'>22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/goutez-electronique-2019/' title='Goûtez électronique 2019 !'>Goûtez électronique 2019 !</a></p></div>")
var marker = L.marker([47.20138, -1.5597482000000582], { icon: myIcon }).bindPopup("<div><p class='date'>Du 13 au 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/scopitone-les-rendez-vous-du-labo/' title='SCOPITONE &#8211; Les rendez-vous du Labo'>SCOPITONE &#8211; Les rendez-vous du Labo</a></p></div>")
var marker = L.marker([47.2046416, -1.5589442000000417], { icon: myIcon }).bindPopup("<div><p class='date'>20 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/exposition-liberte-egalite-fraternite-avec-le-numerique-aussi/' title='Exposition : Liberté, égalité, fraternité avec le numérique aussi'>Exposition : Liberté, égalité, fraternité avec le numérique aussi</a></p></div>")
var marker = L.marker([47.2109888, -1.5459654], { icon: myIcon }).bindPopup("<div><p class='date'>19 sept.  2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/rencontres-regionales-du-logiciel-libre/' title='Rencontres Régionales du Logiciel Libre'>Rencontres Régionales du Logiciel Libre</a></p></div>")
var marker = L.marker([47.20138, -1.5597482000000582], { icon: myIcon }).bindPopup("<div><p class='date'>Du 12 au 22 sept. 2019</p><p><a href='https://www.nantesdigitalweek.com/evenement-2019/scopitone/' title='SCOPITONE'>SCOPITONE</a></p></div>")
`
eval(text)
console.log(`${coll.length} events`)
var events = []
for (var obj of coll) {
    const $ = cheerio.load(obj.html)
    var origText = $('.date').text()
    var dateText = origText.replace('Du', '').replace(/(^\s+)|sept\..*2019|^Les?\s+/ig, '')
    var title = $('a').attr('title')
    var url = $('a').attr('href')
    const event = {
        title,
        url,
        description: `${title}\n${url}\n${origText}\n\n-----------\n${obj.html}`,
        geo: {
            lat: obj.coords[0],
            lon: obj.coords[1]
        },
    }
    if (dateText.indexOf(' et ') > -1) {
        event.title = '⚠⚠️️ ' + event.title
        var numbers = dateText.split(' et ').map(Number)
        numbers.forEach((val) => {
            var eventLocal = Object.create(event)
            eventLocal.start = [2019, 9, val]
            eventLocal.end = [2019, 9, val]
            events.push(eventLocal)

        })
    } else if (dateText.indexOf(' au ') > -1) {
        var numbers = dateText.split(' au ').map(Number)
        event.start = [2019, 9, numbers[0]]
        event.end = [2019, 9, numbers[1]]
        events.push(event)


    } else {
        event.title = '⚠️⚠️ ' + event.title
        var number = Number(dateText)
        event.start = [2019, 9, number]
        event.end = [2019, 9, number]
        events.push(event)
    }

}

ics.createEvents(events, (error, value) => {
    if (error) {
        console.log(error)
        return
    }
    writeFileSync(`${__dirname}/event.ics`, value)
})